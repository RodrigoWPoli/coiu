


ARM Macro Assembler    Page 1 


    1 00000000         ;lcd.s
    2 00000000         ; Desenvolvido para a placa EK-TM4C1294XL
    3 00000000         ; Jhony Minetto Araujo, Ricardo Marthus Gremmelmaier, Ro
                       drigo Wolsky Poli
    4 00000000         ; Ver 1 02/12/2024
    5 00000000         ; Ver 2 29/01/2025
    6 00000000         
    7 00000000         
    8 00000000         ; ------------------------------------------------------
                       -------------------------
    9 00000000                 PRESERVE8        {TRUE}
   10 00000000                 THUMB                        ; Instrucoes do tip
                                                            o Thumb-2
   11 00000000         ; ------------------------------------------------------
                       -------------------------
   12 00000000         ; Declaracoes EQU - Defines
   13 00000000         ; ========================
   14 00000000 400613FC 
                       GPIO_PORTK_DATA_R
                               EQU              0x400613FC
   15 00000000 400633FC 
                       GPIO_PORTM_DATA_R
                               EQU              0x400633FC
   16 00000000         
   17 00000000         
   18 00000000         ; ================== DEFINICAO DA TABELA ===============
                       ====
   19 00000000         
   20 00000000 00000030 
                       char_0  EQU              2_00110000
   21 00000000 00000031 
                       char_1  EQU              2_00110001
   22 00000000 00000032 
                       char_2  EQU              2_00110010
   23 00000000 00000033 
                       char_3  EQU              2_00110011
   24 00000000 00000034 
                       char_4  EQU              2_00110100
   25 00000000 00000035 
                       char_5  EQU              2_00110101
   26 00000000 00000036 
                       char_6  EQU              2_00110110
   27 00000000 00000037 
                       char_7  EQU              2_00110111
   28 00000000 00000038 
                       char_8  EQU              2_00111000
   29 00000000 00000039 
                       char_9  EQU              2_00111001
   30 00000000 000000A5 
                       char_cdot
                               EQU              2_10100101
   31 00000000 0000002E 
                       char_dot
                               EQU              2_00101110
   32 00000000 000000DF 
                       char_angle
                               EQU              2_11011111
   33 00000000 0000002B 
                       char_plus



ARM Macro Assembler    Page 2 


                               EQU              2_00101011
   34 00000000 0000002D 
                       char_minus
                               EQU              2_00101101
   35 00000000 00000020 
                       char_space
                               EQU              2_00100000
   36 00000000 0000003A 
                       char_dois_pontos
                               EQU              2_00111010
   37 00000000 00000029 
                       char_parenteses_dir
                               EQU              2_00101001
   38 00000000 00000041 
                       char_A  EQU              2_01000001
   39 00000000 00000058 
                       char_D  EQU              2_01011000
   40 00000000 00000049 
                       char_I  EQU              2_01001001
   41 00000000 00000050 
                       char_P  EQU              2_01010000
   42 00000000 00000052 
                       char_R  EQU              2_01010010
   43 00000000 00000056 
                       char_V  EQU              2_01010110
   44 00000000 00000061 
                       char_a  EQU              2_01100001
   45 00000000 00000062 
                       char_b  EQU              2_01100010
   46 00000000 00000063 
                       char_c  EQU              2_01100011
   47 00000000 00000064 
                       char_d  EQU              2_01100100
   48 00000000 00000065 
                       char_e  EQU              2_01100101
   49 00000000 00000067 
                       char_g  EQU              2_01100111
   50 00000000 00000069 
                       char_i  EQU              2_01101001
   51 00000000 0000006C 
                       char_l  EQU              2_01101100
   52 00000000 0000006D 
                       char_m  EQU              2_01101101
   53 00000000 0000006E 
                       char_n  EQU              2_01101110
   54 00000000 0000006F 
                       char_o  EQU              2_01101111
   55 00000000 00000072 
                       char_r  EQU              2_01110010
   56 00000000 00000073 
                       char_s  EQU              2_01110011
   57 00000000 00000074 
                       char_t  EQU              2_01110100
   58 00000000 00000075 
                       char_u  EQU              2_01110101
   59 00000000 00000078 
                       char_x  EQU              2_01111000
   60 00000000         
   61 00000000         



ARM Macro Assembler    Page 3 


   62 00000000 20020004 
                       CURR_KEY
                               EQU              0x20020004
   63 00000000 20030000 
                       ANGLE   EQU              0x20030000
   64 00000000 20030004 
                       TURN    EQU              0x20030004
   65 00000000         
   66 00000000         ; ------------------------------------------------------
                       -------------------------
   67 00000000         ; Area de Codigo
   68 00000000                 AREA             |.text|, CODE, READONLY, ALIGN=
2
   69 00000000         
   70 00000000                 EXPORT           create_data_row
   71 00000000                 EXPORT           create_increment_row
   72 00000000                 EXPORT           create_reset_row
   73 00000000                 EXPORT           LCD_Display_Character
   74 00000000                 EXPORT           LCD_go_to_second_line
   75 00000000                 EXPORT           LCD_Reset
   76 00000000         
   77 00000000         
   78 00000000                 IMPORT           SysTick_Wait1ms
   79 00000000                 IMPORT           SysTick_Wait1us
   80 00000000         
   81 00000000                 IMPORT           LCD_Display_Number
   82 00000000         ; ------------------------------------------------------
                       -------------------------
   83 00000000         ; Funcao LCD_Display_Character
   84 00000000         ; Input: R0 -> Dado a ser mostrado no display
   85 00000000         
   86 00000000         LCD_Display_Character
   87 00000000 B500            PUSH             {LR}
   88 00000002         
   89 00000002 49E6            LDR              R1, =GPIO_PORTK_DATA_R ; Dado a
                                                             ser mostrado
   90 00000004 6008            STR              R0, [R1]
   91 00000006         
   92 00000006 49E6            LDR              R1, =GPIO_PORTM_DATA_R
   93 00000008 F04F 0005       MOV              R0, #2_101
   94 0000000C 6008            STR              R0, [R1]
   95 0000000E         
   96 0000000E F04F 0201       LDR              R2, =1
   97 00000012 F7FF FFFE       BL               SysTick_Wait1ms
   98 00000016         
   99 00000016 49E2            LDR              R1, =GPIO_PORTM_DATA_R
  100 00000018 F04F 0000       MOV              R0, #0x00
  101 0000001C 6008            STR              R0, [R1]
  102 0000001E         
  103 0000001E F04F 0201       LDR              R2, =1
  104 00000022 F7FF FFFE       BL               SysTick_Wait1ms
  105 00000026         
  106 00000026 F85D EB04       POP              {LR}
  107 0000002A 4770            BX               LR
  108 0000002C         
  109 0000002C         ; ------------------------------------------------------
                       -------------------------
  110 0000002C         ; Funcao LCD_go_to_second_line
  111 0000002C         ; Faz com que o cursor va para a segunda linha do displa



ARM Macro Assembler    Page 4 


                       y
  112 0000002C         ; Parametro de entrada: nenhum
  113 0000002C         ; Parametro de saida: nenhum
  114 0000002C         
  115 0000002C         LCD_go_to_second_line
  116 0000002C B500            PUSH             {LR}
  117 0000002E         
  118 0000002E 48DB            LDR              R0, =GPIO_PORTK_DATA_R 
                                                            ;Retorna para home
  119 00000030 F04F 0102       MOV              R1, #2_10
  120 00000034 6001            STR              R1, [R0]
  121 00000036         
  122 00000036 48DA            LDR              R0, =GPIO_PORTM_DATA_R
  123 00000038 F04F 0104       MOV              R1, #2_100
  124 0000003C 6001            STR              R1, [R0]
  125 0000003E         
  126 0000003E F04F 0202       MOV              R2, #2
  127 00000042 F7FF FFFE       BL               SysTick_Wait1ms
  128 00000046         
  129 00000046 48D6            LDR              R0, =GPIO_PORTM_DATA_R
  130 00000048 F04F 0100       MOV              R1, #0x00
  131 0000004C 6001            STR              R1, [R0]    ;Retornou para home
                                                            
  132 0000004E         
  133 0000004E F04F 0300       MOV              R3, #0
  134 00000052         cursor_shift_right                   ;Pula os 40 digitos
                                                            
  135 00000052 48D2            LDR              R0, =GPIO_PORTK_DATA_R
  136 00000054 F04F 0114       MOV              R1, #2_10100
  137 00000058 6001            STR              R1, [R0]
  138 0000005A         
  139 0000005A 48D1            LDR              R0, =GPIO_PORTM_DATA_R
  140 0000005C F04F 0104       MOV              R1, #2_100
  141 00000060 6001            STR              R1, [R0]
  142 00000062         
  143 00000062 F04F 0002       MOV              R0, #2
  144 00000066 F7FF FFFE       BL               SysTick_Wait1us
  145 0000006A         
  146 0000006A 48CD            LDR              R0, =GPIO_PORTM_DATA_R
  147 0000006C F04F 0100       MOV              R1, #0x00
  148 00000070 6001            STR              R1, [R0]
  149 00000072         
  150 00000072 F103 0301       ADD              R3, #1
  151 00000076 2B28            CMP              R3, #40
  152 00000078 D1EB            BNE              cursor_shift_right
  153 0000007A         
  154 0000007A F85D EB04       POP              {LR}
  155 0000007E 4770            BX               LR
  156 00000080         
  157 00000080         ; ------------------------------------------------------
                       -------------------------
  158 00000080         ; Funcao LCD_Reset
  159 00000080         ; Reseta os valores de DDRAM do LCD
  160 00000080         ; Parametro de entrada: nenhum
  161 00000080         ; Parametro de saida: nenhum
  162 00000080         LCD_Reset
  163 00000080 B500            PUSH             {LR}
  164 00000082         
  165 00000082 48C6            LDR              R0, =GPIO_PORTK_DATA_R ;Clear n



ARM Macro Assembler    Page 5 


                                                            o display     
  166 00000084 F04F 0101       MOV              R1, #2_1
  167 00000088 6001            STR              R1, [R0]
  168 0000008A         
  169 0000008A 48C5            LDR              R0, =GPIO_PORTM_DATA_R
  170 0000008C F04F 0104       MOV              R1, #2_100
  171 00000090 6001            STR              R1, [R0]
  172 00000092         
  173 00000092 F04F 0201       MOV              R2, #1
  174 00000096 F7FF FFFE       BL               SysTick_Wait1ms
  175 0000009A         
  176 0000009A 48C1            LDR              R0, =GPIO_PORTM_DATA_R
  177 0000009C F04F 0100       MOV              R1, #0x00
  178 000000A0 6001            STR              R1, [R0]
  179 000000A2         
  180 000000A2 F04F 0201       MOV              R2, #1
  181 000000A6 F7FF FFFE       BL               SysTick_Wait1ms
  182 000000AA         
  183 000000AA 48BC            LDR              R0, =GPIO_PORTK_DATA_R 
                                                            ;Retorna para home
  184 000000AC F04F 0102       MOV              R1, #2_10
  185 000000B0 6001            STR              R1, [R0]
  186 000000B2         
  187 000000B2 48BB            LDR              R0, =GPIO_PORTM_DATA_R
  188 000000B4 F04F 0104       MOV              R1, #2_100
  189 000000B8 6001            STR              R1, [R0]
  190 000000BA         
  191 000000BA F04F 0201       MOV              R2, #1
  192 000000BE F7FF FFFE       BL               SysTick_Wait1ms
  193 000000C2         
  194 000000C2 48B7            LDR              R0, =GPIO_PORTM_DATA_R
  195 000000C4 F04F 0100       MOV              R1, #0x00
  196 000000C8 6001            STR              R1, [R0]    ;Retornou para home
                                                            
  197 000000CA         
  198 000000CA F04F 0201       MOV              R2, #1
  199 000000CE F7FF FFFE       BL               SysTick_Wait1ms
  200 000000D2         
  201 000000D2 F85D EB04       POP              {LR}
  202 000000D6 4770            BX               LR
  203 000000D8         ; ------------------------------------------------------
                       ------------------------
  204 000000D8         ; Funcao create_data_row
  205 000000D8         ; Seta hardcode no LCD para apresentar "Angulo: ang Volt
                       a: turn"
  206 000000D8         ; Parametro de entrada: nenhum
  207 000000D8         ; Parametro de saida: nenhum
  208 000000D8         create_data_row
  209 000000D8 B500            PUSH             {LR}
  210 000000DA         
  211 000000DA F7FF FFFE       BL               LCD_Reset
  212 000000DE         
  213 000000DE F04F 0041       LDR              R0, =char_A
  214 000000E2 F7FF FFFE       BL               LCD_Display_Character
  215 000000E6 F04F 006E       LDR              R0, =char_n
  216 000000EA F7FF FFFE       BL               LCD_Display_Character
  217 000000EE F04F 0067       LDR              R0, =char_g
  218 000000F2 F7FF FFFE       BL               LCD_Display_Character
  219 000000F6 F04F 0075       LDR              R0, =char_u



ARM Macro Assembler    Page 6 


  220 000000FA F7FF FFFE       BL               LCD_Display_Character
  221 000000FE F04F 006C       LDR              R0, =char_l
  222 00000102 F7FF FFFE       BL               LCD_Display_Character
  223 00000106 F04F 006F       LDR              R0, =char_o
  224 0000010A F7FF FFFE       BL               LCD_Display_Character
  225 0000010E F04F 003A       LDR              R0, =char_dois_pontos
  226 00000112 F7FF FFFE       BL               LCD_Display_Character
  227 00000116 F04F 0020       LDR              R0, =char_space
  228 0000011A F7FF FFFE       BL               LCD_Display_Character
  229 0000011E         ;Aqui fazer receber o valor de ang, separar ele em até 
                       3 digitos e mostrar
  230 0000011E         
  231 0000011E 49A1            LDR              R1, =ANGLE
  232 00000120 6808            LDR              R0, [R1]
  233 00000122 F04F 0200       MOV              R2, #0
  234 00000126 4290            CMP              R0, R2
  235 00000128 D203            BHS              positive
  236 0000012A         
  237 0000012A F04F 002D       LDR              R0, =char_minus
  238 0000012E F7FF FFFE       BL               LCD_Display_Character
  239 00000132         positive
  240 00000132         
  241 00000132 499C            LDR              R1, =ANGLE
  242 00000134 6808            LDR              R0, [R1]
  243 00000136 F7FF FFFE       BL               LCD_Display_Number 
                                                            ; Chama função C
  244 0000013A         
  245 0000013A F04F 00DF       LDR              R0, =char_angle
  246 0000013E F7FF FFFE       BL               LCD_Display_Character
  247 00000142         
  248 00000142 F7FF FFFE       BL               LCD_go_to_second_line
  249 00000146         
  250 00000146 F04F 0056       LDR              R0, =char_V
  251 0000014A F7FF FFFE       BL               LCD_Display_Character
  252 0000014E F04F 006F       LDR              R0, =char_o
  253 00000152 F7FF FFFE       BL               LCD_Display_Character
  254 00000156 F04F 006C       LDR              R0, =char_l
  255 0000015A F7FF FFFE       BL               LCD_Display_Character
  256 0000015E F04F 0074       LDR              R0, =char_t
  257 00000162 F7FF FFFE       BL               LCD_Display_Character
  258 00000166 F04F 0061       LDR              R0, =char_a
  259 0000016A F7FF FFFE       BL               LCD_Display_Character
  260 0000016E F04F 003A       LDR              R0, =char_dois_pontos
  261 00000172 F7FF FFFE       BL               LCD_Display_Character
  262 00000176 F04F 0020       LDR              R0, =char_space
  263 0000017A F7FF FFFE       BL               LCD_Display_Character
  264 0000017E         ;Aqui fazer receber o valor de turn, separar ele em até
                        3 digitos e mostrar, lembrar que pode ser negativo
  265 0000017E         
  266 0000017E 498A            LDR              R1, =TURN
  267 00000180 6808            LDR              R0, [R1]
  268 00000182 F04F 0200       MOV              R2, #0
  269 00000186 4290            CMP              R0, R2
  270 00000188 D203            BHS              positive2
  271 0000018A         
  272 0000018A F04F 002D       LDR              R0, =char_minus
  273 0000018E F7FF FFFE       BL               LCD_Display_Character
  274 00000192         positive2
  275 00000192         



ARM Macro Assembler    Page 7 


  276 00000192 4985            LDR              R1, =TURN
  277 00000194 6808            LDR              R0, [R1]
  278 00000196 F7FF FFFE       BL               LCD_Display_Number 
                                                            ; Chama função C
  279 0000019A         
  280 0000019A F85D EB04       POP              {LR}
  281 0000019E 4770            BX               LR
  282 000001A0         
  283 000001A0         ; ------------------------------------------------------
                       ------------------------
  284 000001A0         ; Funcao create_increment_row
  285 000001A0         ; Seta hardcode no LCD para apresentar "Incremento: inc"
                       
  286 000001A0         ; Parametro de entrada: nenhum
  287 000001A0         ; Parametro de saida: nenhum
  288 000001A0         create_increment_row
  289 000001A0 B500            PUSH             {LR}
  290 000001A2         
  291 000001A2 F7FF FFFE       BL               LCD_Reset
  292 000001A6         
  293 000001A6 F04F 0049       LDR              R0, =char_I
  294 000001AA F7FF FFFE       BL               LCD_Display_Character
  295 000001AE F04F 006E       LDR              R0, =char_n
  296 000001B2 F7FF FFFE       BL               LCD_Display_Character
  297 000001B6 F04F 0063       LDR              R0, =char_c
  298 000001BA F7FF FFFE       BL               LCD_Display_Character
  299 000001BE F04F 0072       LDR              R0, =char_r
  300 000001C2 F7FF FFFE       BL               LCD_Display_Character
  301 000001C6 F04F 0065       LDR              R0, =char_e
  302 000001CA F7FF FFFE       BL               LCD_Display_Character
  303 000001CE F04F 006D       LDR              R0, =char_m
  304 000001D2 F7FF FFFE       BL               LCD_Display_Character
  305 000001D6 F04F 0065       LDR              R0, =char_e
  306 000001DA F7FF FFFE       BL               LCD_Display_Character
  307 000001DE F04F 006E       LDR              R0, =char_n
  308 000001E2 F7FF FFFE       BL               LCD_Display_Character
  309 000001E6 F04F 0074       LDR              R0, =char_t
  310 000001EA F7FF FFFE       BL               LCD_Display_Character
  311 000001EE F04F 006F       LDR              R0, =char_o
  312 000001F2 F7FF FFFE       BL               LCD_Display_Character
  313 000001F6 F04F 003A       LDR              R0, =char_dois_pontos
  314 000001FA F7FF FFFE       BL               LCD_Display_Character
  315 000001FE F04F 0020       LDR              R0, =char_space
  316 00000202 F7FF FFFE       BL               LCD_Display_Character
  317 00000206         
  318 00000206         
  319 00000206 F85D EB04       POP              {LR}
  320 0000020A 4770            BX               LR
  321 0000020C         
  322 0000020C         ; ------------------------------------------------------
                       ------------------------
  323 0000020C         ; Funcao create_mode_row
  324 0000020C         ; Seta hardcode no LCD para apresentar "Modo de passo: m
                       ode"
  325 0000020C         ; Parametro de entrada: nenhum
  326 0000020C         ; Parametro de saida: nenhum
  327 0000020C         create_mode_row
  328 0000020C B500            PUSH             {LR}
  329 0000020E         



ARM Macro Assembler    Page 8 


  330 0000020E F04F 0049       LDR              R0, =char_I
  331 00000212 F7FF FFFE       BL               LCD_Display_Character
  332 00000216 F04F 006E       LDR              R0, =char_n
  333 0000021A F7FF FFFE       BL               LCD_Display_Character
  334 0000021E F04F 0063       LDR              R0, =char_c
  335 00000222 F7FF FFFE       BL               LCD_Display_Character
  336 00000226 F04F 0072       LDR              R0, =char_r
  337 0000022A F7FF FFFE       BL               LCD_Display_Character
  338 0000022E F04F 0065       LDR              R0, =char_e
  339 00000232 F7FF FFFE       BL               LCD_Display_Character
  340 00000236 F04F 006D       LDR              R0, =char_m
  341 0000023A F7FF FFFE       BL               LCD_Display_Character
  342 0000023E F04F 0065       LDR              R0, =char_e
  343 00000242 F7FF FFFE       BL               LCD_Display_Character
  344 00000246 F04F 006E       LDR              R0, =char_n
  345 0000024A F7FF FFFE       BL               LCD_Display_Character
  346 0000024E F04F 0074       LDR              R0, =char_t
  347 00000252 F7FF FFFE       BL               LCD_Display_Character
  348 00000256 F04F 006F       LDR              R0, =char_o
  349 0000025A F7FF FFFE       BL               LCD_Display_Character
  350 0000025E F04F 003A       LDR              R0, =char_dois_pontos
  351 00000262 F7FF FFFE       BL               LCD_Display_Character
  352 00000266 F04F 0020       LDR              R0, =char_space
  353 0000026A F7FF FFFE       BL               LCD_Display_Character
  354 0000026E         ;Aqui fazer receber o valor de inc, separar ele em até 
                       3 digitos e mostrar
  355 0000026E         ;BL    LCD_Display_Increment
  356 0000026E         
  357 0000026E F85D EB04       POP              {LR}
  358 00000272 4770            BX               LR
  359 00000274         
  360 00000274         ; ------------------------------------------------------
                       ------------------------
  361 00000274         ; Funcao create_reset_row
  362 00000274         ; Seta hardcode no LCD para apresentar "Resetando..."
  363 00000274         ; Parametro de entrada: nenhum
  364 00000274         ; Parametro de saida: nenhum
  365 00000274         create_reset_row
  366 00000274 B500            PUSH             {LR}
  367 00000276         
  368 00000276 F7FF FFFE       BL               LCD_Reset
  369 0000027A         
  370 0000027A         ; Resetando
  371 0000027A F04F 0052       LDR              R0, =char_R
  372 0000027E F7FF FFFE       BL               LCD_Display_Character
  373 00000282 F04F 0065       LDR              R0, =char_e
  374 00000286 F7FF FFFE       BL               LCD_Display_Character
  375 0000028A F04F 0073       LDR              R0, =char_s
  376 0000028E F7FF FFFE       BL               LCD_Display_Character
  377 00000292 F04F 0065       LDR              R0, =char_e
  378 00000296 F7FF FFFE       BL               LCD_Display_Character
  379 0000029A F04F 0074       LDR              R0, =char_t
  380 0000029E F7FF FFFE       BL               LCD_Display_Character
  381 000002A2 F04F 0061       LDR              R0, =char_a
  382 000002A6 F7FF FFFE       BL               LCD_Display_Character
  383 000002AA F04F 006E       LDR              R0, =char_n
  384 000002AE F7FF FFFE       BL               LCD_Display_Character
  385 000002B2 F04F 0064       LDR              R0, =char_d
  386 000002B6 F7FF FFFE       BL               LCD_Display_Character



ARM Macro Assembler    Page 9 


  387 000002BA F04F 006F       LDR              R0, =char_o
  388 000002BE F7FF FFFE       BL               LCD_Display_Character
  389 000002C2         
  390 000002C2         ; ... piscando
  391 000002C2 F04F 0900       MOV              R9, #0      ;quantidade de iter
                                                            acoes geral
  392 000002C6         blink_loop
  393 000002C6 F1B9 0F05       CMP              R9, #5      ;Enquanto nao fizer
                                                             x vezes, nao final
                                                            iza
  394 000002CA D062            BEQ              display_resetado
  395 000002CC         
  396 000002CC         display_dots
  397 000002CC F109 0901       ADD              R9, #1      ;Soma 1 no iterador
                                                            
  398 000002D0         
  399 000002D0 F04F 002E       LDR              R0 , =char_dot
  400 000002D4 F7FF FFFE       BL               LCD_Display_Character
  401 000002D8 F04F 0296       MOV              R2, #150
  402 000002DC F7FF FFFE       BL               SysTick_Wait1ms ;Mostra primeir
                                                            o ponto e espera um
                                                             pouco
  403 000002E0 F04F 002E       LDR              R0, =char_dot
  404 000002E4 F7FF FFFE       BL               LCD_Display_Character
  405 000002E8 F04F 0296       MOV              R2, #150
  406 000002EC F7FF FFFE       BL               SysTick_Wait1ms ;Mostra segundo
                                                             ponto e espera um 
                                                            pouco
  407 000002F0 F04F 002E       LDR              R0, =char_dot
  408 000002F4 F7FF FFFE       BL               LCD_Display_Character
  409 000002F8 F04F 0296       MOV              R2, #150
  410 000002FC F7FF FFFE       BL               SysTick_Wait1ms ;Mostra terceir
                                                            o ponto e espera um
                                                             pouco
  411 00000300         
  412 00000300         
  413 00000300         LCD_Clear_Tail                       ;limpa os 3 pontos 
                                                            finais
  414 00000300         
  415 00000300 F04F 0800       MOV              R8, #0      ;contador de iterac
                                                            oes de espacos
  416 00000304 F04F 0700       MOV              R7, #0      ;contador de iterac
                                                            oes de left shift
  417 00000308         
  418 00000308         cursor_shift_left                    ;Volta os 3 dígito
                                                            s para esquerda
  419 00000308 4824            LDR              R0, =GPIO_PORTK_DATA_R
  420 0000030A F04F 0110       MOV              R1, #2_10000
  421 0000030E 6001            STR              R1, [R0]
  422 00000310         
  423 00000310 4823            LDR              R0, =GPIO_PORTM_DATA_R
  424 00000312 F04F 0104       MOV              R1, #2_100
  425 00000316 6001            STR              R1, [R0]
  426 00000318         
  427 00000318 F04F 0002       MOV              R0, #2
  428 0000031C F7FF FFFE       BL               SysTick_Wait1us
  429 00000320         
  430 00000320 481F            LDR              R0, =GPIO_PORTM_DATA_R
  431 00000322 F04F 0100       MOV              R1, #0x00



ARM Macro Assembler    Page 10 


  432 00000326 6001            STR              R1, [R0]
  433 00000328         
  434 00000328 F04F 0002       MOV              R0, #2
  435 0000032C F7FF FFFE       BL               SysTick_Wait1us
  436 00000330         
  437 00000330 F108 0801       ADD              R8, #1
  438 00000334 F1B8 0F03       CMP              R8, #3
  439 00000338 D1E6            BNE              cursor_shift_left
  440 0000033A         
  441 0000033A         
  442 0000033A         display_spaces                       ;Mostra 3 espaços 
                                                            caso ja nao tenha m
                                                            ostrado
  443 0000033A F04F 0020       LDR              R0, =char_space
  444 0000033E F7FF FFFE       BL               LCD_Display_Character
  445 00000342 F04F 0020       LDR              R0, =char_space
  446 00000346 F7FF FFFE       BL               LCD_Display_Character
  447 0000034A F04F 0020       LDR              R0, =char_space
  448 0000034E F7FF FFFE       BL               LCD_Display_Character
  449 00000352         
  450 00000352 F04F 0296       MOV              R2, #150
  451 00000356 F7FF FFFE       BL               SysTick_Wait1ms
  452 0000035A         
  453 0000035A F04F 0800       MOV              R8, #0
  454 0000035E         cursor_shift_left2
  455 0000035E 480F            LDR              R0, =GPIO_PORTK_DATA_R
  456 00000360 F04F 0110       MOV              R1, #2_10000
  457 00000364 6001            STR              R1, [R0]
  458 00000366         
  459 00000366 480E            LDR              R0, =GPIO_PORTM_DATA_R
  460 00000368 F04F 0104       MOV              R1, #2_100
  461 0000036C 6001            STR              R1, [R0]
  462 0000036E         
  463 0000036E F04F 0002       MOV              R0, #2
  464 00000372 F7FF FFFE       BL               SysTick_Wait1us
  465 00000376         
  466 00000376 480A            LDR              R0, =GPIO_PORTM_DATA_R
  467 00000378 F04F 0100       MOV              R1, #0x00
  468 0000037C 6001            STR              R1, [R0]
  469 0000037E         
  470 0000037E F04F 0002       MOV              R0, #2
  471 00000382 F7FF FFFE       BL               SysTick_Wait1us
  472 00000386         
  473 00000386 F108 0801       ADD              R8, #1
  474 0000038A F1B8 0F03       CMP              R8, #3
  475 0000038E D1E6            BNE              cursor_shift_left2
  476 00000390         
  477 00000390 E799            B                blink_loop  ;Se nao voltou depo
                                                            is do espaco, volta
                                                            . Se voltou, printa
                                                             pontos dnv ou sai 
                                                            do loop
  478 00000392         
  479 00000392         display_resetado
  480 00000392         ; Resetar os valores de ang e turn
  481 00000392         
  482 00000392         ;TO-DO
  483 00000392         
  484 00000392         ;Mostrar data novamente



ARM Macro Assembler    Page 11 


  485 00000392 F7FF FFFE       BL               create_data_row
  486 00000396         
  487 00000396 F85D EB04       POP              {LR}
  488 0000039A 4770            BX               LR
  489 0000039C         
  490 0000039C         
  491 0000039C                 ALIGN
  492 0000039C                 END
              400613FC 
              400633FC 
              20030000 
              20030004 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M4.fp.sp --apcs=
interwork --depend=.\objects\lcd.d -o.\objects\lcd.o -IC:\Users\Ricar\AppData\L
ocal\Arm\Packs\Keil\TM4C_DFP\1.1.0\Device\Include\TM4C129 --predefine="__EVAL S
ETA 1" --predefine="__UVISION_VERSION SETA 536" --predefine="TM4C1294NCPDT SETA
 1" --list=.\listings\lcd.lst lcd.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.text 00000000

Symbol: .text
   Definitions
      At line 68 in file lcd.s
   Uses
      None
Comment: .text unused
LCD_Clear_Tail 00000300

Symbol: LCD_Clear_Tail
   Definitions
      At line 413 in file lcd.s
   Uses
      None
Comment: LCD_Clear_Tail unused
LCD_Display_Character 00000000

Symbol: LCD_Display_Character
   Definitions
      At line 86 in file lcd.s
   Uses
      At line 73 in file lcd.s
      At line 214 in file lcd.s
      At line 216 in file lcd.s
      At line 218 in file lcd.s
      At line 220 in file lcd.s
      At line 222 in file lcd.s
      At line 224 in file lcd.s
      At line 226 in file lcd.s
      At line 228 in file lcd.s
      At line 238 in file lcd.s
      At line 246 in file lcd.s
      At line 251 in file lcd.s
      At line 253 in file lcd.s
      At line 255 in file lcd.s
      At line 257 in file lcd.s
      At line 259 in file lcd.s
      At line 261 in file lcd.s
      At line 263 in file lcd.s
      At line 273 in file lcd.s
      At line 294 in file lcd.s
      At line 296 in file lcd.s
      At line 298 in file lcd.s
      At line 300 in file lcd.s
      At line 302 in file lcd.s
      At line 304 in file lcd.s
      At line 306 in file lcd.s
      At line 308 in file lcd.s
      At line 310 in file lcd.s
      At line 312 in file lcd.s
      At line 314 in file lcd.s
      At line 316 in file lcd.s
      At line 331 in file lcd.s
      At line 333 in file lcd.s
      At line 335 in file lcd.s
      At line 337 in file lcd.s
      At line 339 in file lcd.s
      At line 341 in file lcd.s



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

      At line 343 in file lcd.s
      At line 345 in file lcd.s
      At line 347 in file lcd.s
      At line 349 in file lcd.s
      At line 351 in file lcd.s
      At line 353 in file lcd.s
      At line 372 in file lcd.s
      At line 374 in file lcd.s
      At line 376 in file lcd.s
      At line 378 in file lcd.s
      At line 380 in file lcd.s
      At line 382 in file lcd.s
      At line 384 in file lcd.s
      At line 386 in file lcd.s
      At line 388 in file lcd.s
      At line 400 in file lcd.s
      At line 404 in file lcd.s
      At line 408 in file lcd.s
      At line 444 in file lcd.s
      At line 446 in file lcd.s
      At line 448 in file lcd.s

LCD_Reset 00000080

Symbol: LCD_Reset
   Definitions
      At line 162 in file lcd.s
   Uses
      At line 75 in file lcd.s
      At line 211 in file lcd.s
      At line 291 in file lcd.s
      At line 368 in file lcd.s

LCD_go_to_second_line 0000002C

Symbol: LCD_go_to_second_line
   Definitions
      At line 115 in file lcd.s
   Uses
      At line 74 in file lcd.s
      At line 248 in file lcd.s

blink_loop 000002C6

Symbol: blink_loop
   Definitions
      At line 392 in file lcd.s
   Uses
      At line 477 in file lcd.s
Comment: blink_loop used once
create_data_row 000000D8

Symbol: create_data_row
   Definitions
      At line 208 in file lcd.s
   Uses
      At line 70 in file lcd.s
      At line 485 in file lcd.s




ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Relocatable symbols

create_increment_row 000001A0

Symbol: create_increment_row
   Definitions
      At line 288 in file lcd.s
   Uses
      At line 71 in file lcd.s
Comment: create_increment_row used once
create_mode_row 0000020C

Symbol: create_mode_row
   Definitions
      At line 327 in file lcd.s
   Uses
      None
Comment: create_mode_row unused
create_reset_row 00000274

Symbol: create_reset_row
   Definitions
      At line 365 in file lcd.s
   Uses
      At line 72 in file lcd.s
Comment: create_reset_row used once
cursor_shift_left 00000308

Symbol: cursor_shift_left
   Definitions
      At line 418 in file lcd.s
   Uses
      At line 439 in file lcd.s
Comment: cursor_shift_left used once
cursor_shift_left2 0000035E

Symbol: cursor_shift_left2
   Definitions
      At line 454 in file lcd.s
   Uses
      At line 475 in file lcd.s
Comment: cursor_shift_left2 used once
cursor_shift_right 00000052

Symbol: cursor_shift_right
   Definitions
      At line 134 in file lcd.s
   Uses
      At line 152 in file lcd.s
Comment: cursor_shift_right used once
display_dots 000002CC

Symbol: display_dots
   Definitions
      At line 396 in file lcd.s
   Uses
      None
Comment: display_dots unused
display_resetado 00000392

Symbol: display_resetado



ARM Macro Assembler    Page 4 Alphabetic symbol ordering
Relocatable symbols

   Definitions
      At line 479 in file lcd.s
   Uses
      At line 394 in file lcd.s
Comment: display_resetado used once
display_spaces 0000033A

Symbol: display_spaces
   Definitions
      At line 442 in file lcd.s
   Uses
      None
Comment: display_spaces unused
positive 00000132

Symbol: positive
   Definitions
      At line 239 in file lcd.s
   Uses
      At line 235 in file lcd.s
Comment: positive used once
positive2 00000192

Symbol: positive2
   Definitions
      At line 274 in file lcd.s
   Uses
      At line 270 in file lcd.s
Comment: positive2 used once
18 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

ANGLE 20030000

Symbol: ANGLE
   Definitions
      At line 63 in file lcd.s
   Uses
      At line 231 in file lcd.s
      At line 241 in file lcd.s

CURR_KEY 20020004

Symbol: CURR_KEY
   Definitions
      At line 62 in file lcd.s
   Uses
      None
Comment: CURR_KEY unused
GPIO_PORTK_DATA_R 400613FC

Symbol: GPIO_PORTK_DATA_R
   Definitions
      At line 14 in file lcd.s
   Uses
      At line 89 in file lcd.s
      At line 118 in file lcd.s
      At line 135 in file lcd.s
      At line 165 in file lcd.s
      At line 183 in file lcd.s
      At line 419 in file lcd.s
      At line 455 in file lcd.s

GPIO_PORTM_DATA_R 400633FC

Symbol: GPIO_PORTM_DATA_R
   Definitions
      At line 15 in file lcd.s
   Uses
      At line 92 in file lcd.s
      At line 99 in file lcd.s
      At line 122 in file lcd.s
      At line 129 in file lcd.s
      At line 139 in file lcd.s
      At line 146 in file lcd.s
      At line 169 in file lcd.s
      At line 176 in file lcd.s
      At line 187 in file lcd.s
      At line 194 in file lcd.s
      At line 423 in file lcd.s
      At line 430 in file lcd.s
      At line 459 in file lcd.s
      At line 466 in file lcd.s

TURN 20030004

Symbol: TURN
   Definitions
      At line 64 in file lcd.s
   Uses
      At line 266 in file lcd.s



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

      At line 276 in file lcd.s

char_0 00000030

Symbol: char_0
   Definitions
      At line 20 in file lcd.s
   Uses
      None
Comment: char_0 unused
char_1 00000031

Symbol: char_1
   Definitions
      At line 21 in file lcd.s
   Uses
      None
Comment: char_1 unused
char_2 00000032

Symbol: char_2
   Definitions
      At line 22 in file lcd.s
   Uses
      None
Comment: char_2 unused
char_3 00000033

Symbol: char_3
   Definitions
      At line 23 in file lcd.s
   Uses
      None
Comment: char_3 unused
char_4 00000034

Symbol: char_4
   Definitions
      At line 24 in file lcd.s
   Uses
      None
Comment: char_4 unused
char_5 00000035

Symbol: char_5
   Definitions
      At line 25 in file lcd.s
   Uses
      None
Comment: char_5 unused
char_6 00000036

Symbol: char_6
   Definitions
      At line 26 in file lcd.s
   Uses
      None
Comment: char_6 unused
char_7 00000037



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Absolute symbols


Symbol: char_7
   Definitions
      At line 27 in file lcd.s
   Uses
      None
Comment: char_7 unused
char_8 00000038

Symbol: char_8
   Definitions
      At line 28 in file lcd.s
   Uses
      None
Comment: char_8 unused
char_9 00000039

Symbol: char_9
   Definitions
      At line 29 in file lcd.s
   Uses
      None
Comment: char_9 unused
char_A 00000041

Symbol: char_A
   Definitions
      At line 38 in file lcd.s
   Uses
      At line 213 in file lcd.s
Comment: char_A used once
char_D 00000058

Symbol: char_D
   Definitions
      At line 39 in file lcd.s
   Uses
      None
Comment: char_D unused
char_I 00000049

Symbol: char_I
   Definitions
      At line 40 in file lcd.s
   Uses
      At line 293 in file lcd.s
      At line 330 in file lcd.s

char_P 00000050

Symbol: char_P
   Definitions
      At line 41 in file lcd.s
   Uses
      None
Comment: char_P unused
char_R 00000052

Symbol: char_R



ARM Macro Assembler    Page 4 Alphabetic symbol ordering
Absolute symbols

   Definitions
      At line 42 in file lcd.s
   Uses
      At line 371 in file lcd.s
Comment: char_R used once
char_V 00000056

Symbol: char_V
   Definitions
      At line 43 in file lcd.s
   Uses
      At line 250 in file lcd.s
Comment: char_V used once
char_a 00000061

Symbol: char_a
   Definitions
      At line 44 in file lcd.s
   Uses
      At line 258 in file lcd.s
      At line 381 in file lcd.s

char_angle 000000DF

Symbol: char_angle
   Definitions
      At line 32 in file lcd.s
   Uses
      At line 245 in file lcd.s
Comment: char_angle used once
char_b 00000062

Symbol: char_b
   Definitions
      At line 45 in file lcd.s
   Uses
      None
Comment: char_b unused
char_c 00000063

Symbol: char_c
   Definitions
      At line 46 in file lcd.s
   Uses
      At line 297 in file lcd.s
      At line 334 in file lcd.s

char_cdot 000000A5

Symbol: char_cdot
   Definitions
      At line 30 in file lcd.s
   Uses
      None
Comment: char_cdot unused
char_d 00000064

Symbol: char_d
   Definitions



ARM Macro Assembler    Page 5 Alphabetic symbol ordering
Absolute symbols

      At line 47 in file lcd.s
   Uses
      At line 385 in file lcd.s
Comment: char_d used once
char_dois_pontos 0000003A

Symbol: char_dois_pontos
   Definitions
      At line 36 in file lcd.s
   Uses
      At line 225 in file lcd.s
      At line 260 in file lcd.s
      At line 313 in file lcd.s
      At line 350 in file lcd.s

char_dot 0000002E

Symbol: char_dot
   Definitions
      At line 31 in file lcd.s
   Uses
      At line 399 in file lcd.s
      At line 403 in file lcd.s
      At line 407 in file lcd.s

char_e 00000065

Symbol: char_e
   Definitions
      At line 48 in file lcd.s
   Uses
      At line 301 in file lcd.s
      At line 305 in file lcd.s
      At line 338 in file lcd.s
      At line 342 in file lcd.s
      At line 373 in file lcd.s
      At line 377 in file lcd.s

char_g 00000067

Symbol: char_g
   Definitions
      At line 49 in file lcd.s
   Uses
      At line 217 in file lcd.s
Comment: char_g used once
char_i 00000069

Symbol: char_i
   Definitions
      At line 50 in file lcd.s
   Uses
      None
Comment: char_i unused
char_l 0000006C

Symbol: char_l
   Definitions
      At line 51 in file lcd.s



ARM Macro Assembler    Page 6 Alphabetic symbol ordering
Absolute symbols

   Uses
      At line 221 in file lcd.s
      At line 254 in file lcd.s

char_m 0000006D

Symbol: char_m
   Definitions
      At line 52 in file lcd.s
   Uses
      At line 303 in file lcd.s
      At line 340 in file lcd.s

char_minus 0000002D

Symbol: char_minus
   Definitions
      At line 34 in file lcd.s
   Uses
      At line 237 in file lcd.s
      At line 272 in file lcd.s

char_n 0000006E

Symbol: char_n
   Definitions
      At line 53 in file lcd.s
   Uses
      At line 215 in file lcd.s
      At line 295 in file lcd.s
      At line 307 in file lcd.s
      At line 332 in file lcd.s
      At line 344 in file lcd.s
      At line 383 in file lcd.s

char_o 0000006F

Symbol: char_o
   Definitions
      At line 54 in file lcd.s
   Uses
      At line 223 in file lcd.s
      At line 252 in file lcd.s
      At line 311 in file lcd.s
      At line 348 in file lcd.s
      At line 387 in file lcd.s

char_parenteses_dir 00000029

Symbol: char_parenteses_dir
   Definitions
      At line 37 in file lcd.s
   Uses
      None
Comment: char_parenteses_dir unused
char_plus 0000002B

Symbol: char_plus
   Definitions



ARM Macro Assembler    Page 7 Alphabetic symbol ordering
Absolute symbols

      At line 33 in file lcd.s
   Uses
      None
Comment: char_plus unused
char_r 00000072

Symbol: char_r
   Definitions
      At line 55 in file lcd.s
   Uses
      At line 299 in file lcd.s
      At line 336 in file lcd.s

char_s 00000073

Symbol: char_s
   Definitions
      At line 56 in file lcd.s
   Uses
      At line 375 in file lcd.s
Comment: char_s used once
char_space 00000020

Symbol: char_space
   Definitions
      At line 35 in file lcd.s
   Uses
      At line 227 in file lcd.s
      At line 262 in file lcd.s
      At line 315 in file lcd.s
      At line 352 in file lcd.s
      At line 443 in file lcd.s
      At line 445 in file lcd.s
      At line 447 in file lcd.s

char_t 00000074

Symbol: char_t
   Definitions
      At line 57 in file lcd.s
   Uses
      At line 256 in file lcd.s
      At line 309 in file lcd.s
      At line 346 in file lcd.s
      At line 379 in file lcd.s

char_u 00000075

Symbol: char_u
   Definitions
      At line 58 in file lcd.s
   Uses
      At line 219 in file lcd.s
Comment: char_u used once
char_x 00000078

Symbol: char_x
   Definitions
      At line 59 in file lcd.s



ARM Macro Assembler    Page 8 Alphabetic symbol ordering
Absolute symbols

   Uses
      None
Comment: char_x unused
45 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

LCD_Display_Number 00000000

Symbol: LCD_Display_Number
   Definitions
      At line 81 in file lcd.s
   Uses
      At line 243 in file lcd.s
      At line 278 in file lcd.s

SysTick_Wait1ms 00000000

Symbol: SysTick_Wait1ms
   Definitions
      At line 78 in file lcd.s
   Uses
      At line 97 in file lcd.s
      At line 104 in file lcd.s
      At line 127 in file lcd.s
      At line 174 in file lcd.s
      At line 181 in file lcd.s
      At line 192 in file lcd.s
      At line 199 in file lcd.s
      At line 402 in file lcd.s
      At line 406 in file lcd.s
      At line 410 in file lcd.s
      At line 451 in file lcd.s

SysTick_Wait1us 00000000

Symbol: SysTick_Wait1us
   Definitions
      At line 79 in file lcd.s
   Uses
      At line 144 in file lcd.s
      At line 428 in file lcd.s
      At line 435 in file lcd.s
      At line 464 in file lcd.s
      At line 471 in file lcd.s

3 symbols
402 symbols in table
