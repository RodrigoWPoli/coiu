


ARM Macro Assembler    Page 1 


    1 00000000         ; main.s
    2 00000000         ; Desenvolvido para a placa EK-TM4C1294XL
    3 00000000         ; Este programa espera o usuario apertar a chave USR_SW1
                        e/ou a chave USR_SW2.
    4 00000000         ; Caso o usuario pressione a chave USR_SW1, acendera o L
                       ED3 (PF4). Caso o usuario pressione 
    5 00000000         ; a chave USR_SW2, acendera o LED4 (PF0). Caso as duas c
                       haves sejam pressionadas, os dois 
    6 00000000         ; LEDs acendem.
    7 00000000         
    8 00000000         ; ------------------------------------------------------
                       -------------------------
    9 00000000                 THUMB                        ; Instrucoes do tip
                                                            o Thumb-2
   10 00000000         ; ------------------------------------------------------
                       -------------------------
   11 00000000         ; Declaracoes EQU - Defines
   12 00000000         ;<NOME>         EQU <VALOR>
   13 00000000         ; ========================
   14 00000000         ; ~~~~~~~~~~~~~ OTHER CONSTANTS ~~~~~~~~~~~~~~
   15 00000000 20010000 
                       Timer0A_Addr
                               EQU              0x20010000
   16 00000000 20020000 
                       PREV_KEYPRESS
                               EQU              0x20020000
   17 00000000         
   18 00000000         ; ------------------------------------------------------
                       -------------------------
   19 00000000         ; Area de Dados - Declaracoes de variaveis
   20 00000000                 AREA             DATA, ALIGN=2
   21 00000000         ; Se alguma variavel for chamada em outro arquivo
   22 00000000         ;EXPORT  <var> [DATA,SIZE=<tam>]   ; Permite chamar a va
                       riavel <var> a 
   23 00000000         ; partir de outro arquivo
   24 00000000         ;<var> SPACE <tam>                        ; Declara uma 
                       variavel de nome <var>
   25 00000000         ; de <tam> bytes a partir da primeira 
   26 00000000         ; posicao da RAM  
   27 00000000         
   28 00000000         ; ------------------------------------------------------
                       -------------------------
   29 00000000         ; Area de Codigo - Tudo abaixo da diretiva a seguir sera
                        armazenado na memoria de 
   30 00000000         ;                  codigo
   31 00000000                 AREA             |.text|, CODE, READONLY, ALIGN=
2
   32 00000000         
   33 00000000         ; Se alguma funcao do arquivo for chamada em outro arqui
                       vo 
   34 00000000                 EXPORT           Start       ; Permite chamar a 
                                                            funcao Start a part
                                                            ir de 
   35 00000000         ; outro arquivo. No caso startup.s
   36 00000000         
   37 00000000         ; Se chamar alguma funcao externa 
   38 00000000         ;IMPORT <func>              ; Permite chamar dentro dest
                       e arquivo uma 
   39 00000000         ; funcao <func>



ARM Macro Assembler    Page 2 


   40 00000000                 IMPORT           PLL_Init
   41 00000000                 IMPORT           SysTick_Init
   42 00000000                 IMPORT           SysTick_Wait1us
   43 00000000                 IMPORT           SysTick_Wait1ms
   44 00000000                 IMPORT           GPIO_Init
   45 00000000                 IMPORT           LCD_Init
   46 00000000                 IMPORT           Timer0A_Init
   47 00000000                 IMPORT           Interrupt_Init
   48 00000000         
   49 00000000                 IMPORT           TecladoM_Poll
   50 00000000                 IMPORT           create_table
   51 00000000                 IMPORT           multi_table
   52 00000000                 IMPORT           Timer0A_Handler
   53 00000000                 IMPORT           LCD_Display_Character
   54 00000000         
   55 00000000         ; ------------------------------------------------------
                       -------------------------
   56 00000000         ; Funcao main()
   57 00000000         Start
   58 00000000 F7FF FFFE       BL               PLL_Init    ;Subrotina para alt
                                                            erar o clock do mic
                                                            rocontrolador para 
                                                            80MHz
   59 00000004 F7FF FFFE       BL               SysTick_Init ;
   60 00000008 F7FF FFFE       BL               GPIO_Init   ;Subrotina que inic
                                                            ializa os GPIO
   61 0000000C F7FF FFFE       BL               LCD_Init    ;Subrotina que inic
                                                            ializa o LCD
   62 00000010 F7FF FFFE       BL               Timer0A_Init ;Subrotina que ini
                                                            cializa o Timer0A
   63 00000014 F7FF FFFE       BL               Interrupt_Init ;Subrotina que i
                                                            nicializa os Interr
                                                            upts de GPIO
   64 00000018 F7FF FFFE       BL               create_table ;Subrotina que cri
                                                            a a tabela de multi
                                                            plicacao
   65 0000001C         
   66 0000001C         ; ------------------------------------------------------
                       -------------------------
   67 0000001C         ; Laco principal
   68 0000001C         ; R1 = valor da tecla pressionada
   69 0000001C         
   70 0000001C         
   71 0000001C         MainLoop
   72 0000001C 480E            LDR              R0, =Timer0A_Addr
   73 0000001E 6801            LDR              R1, [R0]
   74 00000020 2901            CMP              R1, #1
   75 00000022 D003            BEQ              update_data
   76 00000024 F04F 0200       MOV              R2, #0
   77 00000028 6002            STR              R2, [R0]
   78 0000002A         
   79 0000002A E7F7            B                MainLoop    ;Volta para o laco 
                                                            principal
   80 0000002C         
   81 0000002C         
   82 0000002C         update_data
   83 0000002C 480A            LDR              R0, =Timer0A_Addr
   84 0000002E F04F 0100       MOV              R1, #0
   85 00000032 6001            STR              R1, [R0]



ARM Macro Assembler    Page 3 


   86 00000034         
   87 00000034 F7FF FFFE       BL               TecladoM_Poll
   88 00000038         
   89 00000038 4808            LDR              R0, =PREV_KEYPRESS
   90 0000003A 6802            LDR              R2, [R0]
   91 0000003C 6001            STR              R1, [R0]
   92 0000003E         ; PUSH  {R1}
   93 0000003E         ; BL   LCD_Display_Character
   94 0000003E         ; POP  {R1}
   95 0000003E 2A10            CMP              R2, #0x10   ; Se a Ãºltima tecl
                                                            a for nula pula
   96 00000040 D009            BEQ              skip
   97 00000042         
   98 00000042 2910            CMP              R1, #0x10   ; Detecta falling-e
                                                            dge da tecla
   99 00000044 D107            BNE              skip
  100 00000046         
  101 00000046 F002 010F       AND              R1, R2, #0x0F ; Filtra os 4 LSB
                                                             de R1
  102 0000004A 2901            CMP              R1, #0x1    ; Verifica se a tec
                                                            la pressionada esta
                                                             entre 1 e 9
  103 0000004C D303            BLO              skip
  104 0000004E         
  105 0000004E 2909            CMP              R1, #0x9
  106 00000050 D801            BHI              skip
  107 00000052         
  108 00000052         ; R2 = resultado da multiplicacao
  109 00000052 F7FF FFFE       BL               multi_table
  110 00000056         
  111 00000056         skip
  112 00000056         
  113 00000056 E7E1            B                MainLoop
  114 00000058         
  115 00000058                 ALIGN                        ;Garante que o fim 
                                                            da secao esta alinh
                                                            ada 
  116 00000058                 END                          ;Fim do arquivo
              20010000 
              20020000 
Command Line: --debug --xref --diag_suppress=9931,A1950W --cpu=Cortex-M4.fp.sp 
--depend=.\objects\main.d -o.\objects\main.o -IC:\Users\jhony\AppData\Local\Arm
\Packs\Keil\TM4C_DFP\1.1.0\Device\Include\TM4C129 --predefine="__EVAL SETA 1" -
-predefine="__UVISION_VERSION SETA 541" --predefine="TM4C1294NCPDT SETA 1" --li
st=.\listings\main.lst main.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

DATA 00000000

Symbol: DATA
   Definitions
      At line 20 in file main.s
   Uses
      None
Comment: DATA unused
1 symbol



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.text 00000000

Symbol: .text
   Definitions
      At line 31 in file main.s
   Uses
      None
Comment: .text unused
MainLoop 0000001C

Symbol: MainLoop
   Definitions
      At line 71 in file main.s
   Uses
      At line 79 in file main.s
      At line 113 in file main.s

Start 00000000

Symbol: Start
   Definitions
      At line 57 in file main.s
   Uses
      At line 34 in file main.s
Comment: Start used once
skip 00000056

Symbol: skip
   Definitions
      At line 111 in file main.s
   Uses
      At line 96 in file main.s
      At line 99 in file main.s
      At line 103 in file main.s
      At line 106 in file main.s

update_data 0000002C

Symbol: update_data
   Definitions
      At line 82 in file main.s
   Uses
      At line 75 in file main.s
Comment: update_data used once
5 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

PREV_KEYPRESS 20020000

Symbol: PREV_KEYPRESS
   Definitions
      At line 16 in file main.s
   Uses
      At line 89 in file main.s
Comment: PREV_KEYPRESS used once
Timer0A_Addr 20010000

Symbol: Timer0A_Addr
   Definitions
      At line 15 in file main.s
   Uses
      At line 72 in file main.s
      At line 83 in file main.s

2 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

GPIO_Init 00000000

Symbol: GPIO_Init
   Definitions
      At line 44 in file main.s
   Uses
      At line 60 in file main.s
Comment: GPIO_Init used once
Interrupt_Init 00000000

Symbol: Interrupt_Init
   Definitions
      At line 47 in file main.s
   Uses
      At line 63 in file main.s
Comment: Interrupt_Init used once
LCD_Display_Character 00000000

Symbol: LCD_Display_Character
   Definitions
      At line 53 in file main.s
   Uses
      None
Comment: LCD_Display_Character unused
LCD_Init 00000000

Symbol: LCD_Init
   Definitions
      At line 45 in file main.s
   Uses
      At line 61 in file main.s
Comment: LCD_Init used once
PLL_Init 00000000

Symbol: PLL_Init
   Definitions
      At line 40 in file main.s
   Uses
      At line 58 in file main.s
Comment: PLL_Init used once
SysTick_Init 00000000

Symbol: SysTick_Init
   Definitions
      At line 41 in file main.s
   Uses
      At line 59 in file main.s
Comment: SysTick_Init used once
SysTick_Wait1ms 00000000

Symbol: SysTick_Wait1ms
   Definitions
      At line 43 in file main.s
   Uses
      None
Comment: SysTick_Wait1ms unused
SysTick_Wait1us 00000000

Symbol: SysTick_Wait1us



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
External symbols

   Definitions
      At line 42 in file main.s
   Uses
      None
Comment: SysTick_Wait1us unused
TecladoM_Poll 00000000

Symbol: TecladoM_Poll
   Definitions
      At line 49 in file main.s
   Uses
      At line 87 in file main.s
Comment: TecladoM_Poll used once
Timer0A_Handler 00000000

Symbol: Timer0A_Handler
   Definitions
      At line 52 in file main.s
   Uses
      None
Comment: Timer0A_Handler unused
Timer0A_Init 00000000

Symbol: Timer0A_Init
   Definitions
      At line 46 in file main.s
   Uses
      At line 62 in file main.s
Comment: Timer0A_Init used once
create_table 00000000

Symbol: create_table
   Definitions
      At line 50 in file main.s
   Uses
      At line 64 in file main.s
Comment: create_table used once
multi_table 00000000

Symbol: multi_table
   Definitions
      At line 51 in file main.s
   Uses
      At line 109 in file main.s
Comment: multi_table used once
13 symbols
357 symbols in table
