


ARM Macro Assembler    Page 1 


    1 00000000         ; timers.s
    2 00000000         ; Desenvolvido para a placa EK-TM4C1294XL
    3 00000000         ; Jhony Minetto Araujo, Ricardo Marthus Gremmelmaier, Ro
                       drigo Wolsky Poli
    4 00000000         ; Ver 1 02/12/2024
    5 00000000         
    6 00000000         ; ------------------------------------------------------
                       -------------------------
    7 00000000                 THUMB                        ; Instrucoes do tip
                                                            o Thumb-2
    8 00000000         ; ------------------------------------------------------
                       -------------------------
    9 00000000         ; Definicoes dos Registradores Gerais
   10 00000000 400FE604 
                       SYSCTL_RCGCTIMER_R
                               EQU              0x400FE604
   11 00000000 400FEA04 
                       SYSCTL_PRTIMER_R
                               EQU              0x400FEA04
   12 00000000         ; ========================
   13 00000000         ; Definicoes dos Timers
   14 00000000         ; ~~~~~~~~~~~~~~~~ Timer 0 ~~~~~~~~~~~~~~~~~~
   15 00000000 00000013 
                       TIMER0_A_NVIC_INT_NUM
                               EQU              19
   16 00000000 E000E410 
                       TIMER0_A_NVIC_PRIO_R
                               EQU              0xE000E410
   17 00000000 E000E100 
                       TIMER0_A_NVIC_EN_R
                               EQU              0xE000E100
   18 00000000 40030000 
                       TIMER0_CFG_R
                               EQU              0x40030000
   19 00000000 40030004 
                       TIMER0_TAMR_R
                               EQU              0x40030004
   20 00000000 4003000C 
                       TIMER0_CTL_R
                               EQU              0x4003000C
   21 00000000 40030018 
                       TIMER0_IMR_R
                               EQU              0x40030018
   22 00000000 40030024 
                       TIMER0_ICR_R
                               EQU              0x40030024
   23 00000000 40030028 
                       TIMER0_TAILR_R
                               EQU              0x40030028
   24 00000000 40030038 
                       TIMER0_TAPR_R
                               EQU              0x40030038
   25 00000000 00000001 
                       TIMER0  EQU              2_00000001
   26 00000000         
   27 00000000         ; ~~~~~~~~~~~~~ OTHER CONSTANTS ~~~~~~~~~~~~~~
   28 00000000 60010000 
                       Timer0A_Addr
                               EQU              0x60010000



ARM Macro Assembler    Page 2 


   29 00000000         
   30 00000000         ; ------------------------------------------------------
                       -------------------------
   31 00000000         ; Area de Codigo - Tudo abaixo da diretiva a seguir sera
                        armazenado na memoria de 
   32 00000000         ;                  codigo
   33 00000000                 AREA             |.text|, CODE, READONLY, ALIGN=
2
   34 00000000         
   35 00000000         ; Se alguma funcao do arquivo for chamada em outro arqui
                       vo 
   36 00000000                 EXPORT           Timer0A_Init
   37 00000000                 EXPORT           Timer0A_Handler
   38 00000000         
   39 00000000         
   40 00000000         ;-------------------------------------------------------
                       -------------------------
   41 00000000         Timer0A_Init
   42 00000000 481D            LDR              R0, =SYSCTL_RCGCTIMER_R ; Seta 
                                                            o timer 0 para ser 
                                                            usado
   43 00000002 F04F 0101       LDR              R1, =TIMER0
   44 00000006 6001            STR              R1, [R0]
   45 00000008         
   46 00000008 481C            LDR              R0, =SYSCTL_PRTIMER_R
   47 0000000A         EsperaTIMER
   48 0000000A 6801            LDR              R1, [R0]
   49 0000000C F04F 0201       LDR              R2, =TIMER0
   50 00000010 4211            TST              R1, R2
   51 00000012 D0FA            BEQ              EsperaTIMER
   52 00000014         
   53 00000014         
   54 00000014 481A            LDR              R0, =TIMER0_CTL_R ; Desabilita 
                                                            o timer 0
   55 00000016 F04F 0100       MOV              R1, #0
   56 0000001A 6001            STR              R1, [R0]
   57 0000001C         
   58 0000001C 4819            LDR              R0, =TIMER0_CFG_R ; Configura o
                                                             modo de 16 bits
   59 0000001E F04F 0100       MOV              R1, #0x0
   60 00000022 6001            STR              R1, [R0]
   61 00000024         
   62 00000024 4818            LDR              R0, =TIMER0_TAMR_R ; Define o m
                                                            odo periodico
   63 00000026 F04F 0102       MOV              R1, #0x2
   64 0000002A 6001            STR              R1, [R0]
   65 0000002C         
   66 0000002C 4817            LDR              R0, =TIMER0_TAILR_R ; Tempo cal
                                                            culado para 20ms
   67 0000002E 4918            LDR              R1, =1599999
   68 00000030 6001            STR              R1, [R0]
   69 00000032         
   70 00000032 4818            LDR              R0, =TIMER0_TAPR_R ; Configura 
                                                            o Prescaler 
   71 00000034 F04F 0100       MOV              R1, #0      ; 0 para desabilita
                                                            do
   72 00000038 6001            STR              R1, [R0]
   73 0000003A         
   74 0000003A 4817            LDR              R0, =TIMER0_ICR_R ; Garante que



ARM Macro Assembler    Page 3 


                                                             a primeira interru
                                                            pcao sera atendida 
                                                            (?)
   75 0000003C F04F 0101       MOV              R1, #1
   76 00000040 6001            STR              R1, [R0]
   77 00000042         
   78 00000042 4816            LDR              R0, =TIMER0_IMR_R ; Utiliza a i
                                                            nterrupcao para est
                                                            ouro do timer
   79 00000044 F04F 0101       MOV              R1, #1
   80 00000048 6001            STR              R1, [R0]
   81 0000004A         
   82 0000004A F04F 0004       MOV              R0, #4      ; Configura a prior
                                                            idade da interrupca
                                                            o do timer
   83 0000004E EA4F 7040       LSL              R0, R0, #29
   84 00000052 4913            LDR              R1, =TIMER0_A_NVIC_PRIO_R
   85 00000054 6008            STR              R0, [R1]
   86 00000056         
   87 00000056 F04F 0001       MOV              R0, #1      ; Habilita a interr
                                                            upcao do Timer 0A n
                                                            o NVIC Enable Regis
                                                            ter
   88 0000005A EA4F 40C0       LSL              R0, R0, #TIMER0_A_NVIC_INT_NUM
   89 0000005E 4911            LDR              R1, =TIMER0_A_NVIC_EN_R
   90 00000060 6008            STR              R0, [R1]
   91 00000062         
   92 00000062 4807            LDR              R0, =TIMER0_CTL_R ; Habilita o 
                                                            timer 0
   93 00000064 F04F 0101       MOV              R1, #1
   94 00000068 6001            STR              R1, [R0]
   95 0000006A         
   96 0000006A 4770            BX               LR
   97 0000006C         
   98 0000006C         
   99 0000006C         Timer0A_Handler
  100 0000006C 480A            LDR              R0, =TIMER0_ICR_R ; Limpa o bit
                                                             da interrupcao
  101 0000006E F04F 0101       MOV              R1, #1
  102 00000072 6001            STR              R1, [R0]
  103 00000074         
  104 00000074         ; LDR     R0, =Timer0A_Addr
  105 00000074         ; MOV     R1, #1
  106 00000074         ; STR     R1, [R0]
  107 00000074         
  108 00000074 4770            BX               LR
  109 00000076         
  110 00000076         
  111 00000076 00 00           ALIGN                        ;Garante que o fim 
                                                            da secao esta alinh
                                                            ada 
  112 00000078                 END                          ;Fim do arquivo
              400FE604 
              400FEA04 
              4003000C 
              40030000 
              40030004 
              40030028 
              001869FF 



ARM Macro Assembler    Page 4 


              40030038 
              40030024 
              40030018 
              E000E410 
              E000E100 
Command Line: --debug --xref --diag_suppress=9931,A1950W --cpu=Cortex-M4.fp.sp 
--depend=.\objects\timers.d -o.\objects\timers.o -IC:\Users\jhony\AppData\Local
\Arm\Packs\Keil\TM4C_DFP\1.1.0\Device\Include\TM4C129 --predefine="__EVAL SETA 
1" --predefine="__UVISION_VERSION SETA 541" --predefine="TM4C1294NCPDT SETA 1" 
--list=.\listings\timers.lst timers.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.text 00000000

Symbol: .text
   Definitions
      At line 33 in file timers.s
   Uses
      None
Comment: .text unused
EsperaTIMER 0000000A

Symbol: EsperaTIMER
   Definitions
      At line 47 in file timers.s
   Uses
      At line 51 in file timers.s
Comment: EsperaTIMER used once
Timer0A_Handler 0000006C

Symbol: Timer0A_Handler
   Definitions
      At line 99 in file timers.s
   Uses
      At line 37 in file timers.s
Comment: Timer0A_Handler used once
Timer0A_Init 00000000

Symbol: Timer0A_Init
   Definitions
      At line 41 in file timers.s
   Uses
      At line 36 in file timers.s
Comment: Timer0A_Init used once
4 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

SYSCTL_PRTIMER_R 400FEA04

Symbol: SYSCTL_PRTIMER_R
   Definitions
      At line 11 in file timers.s
   Uses
      At line 46 in file timers.s
Comment: SYSCTL_PRTIMER_R used once
SYSCTL_RCGCTIMER_R 400FE604

Symbol: SYSCTL_RCGCTIMER_R
   Definitions
      At line 10 in file timers.s
   Uses
      At line 42 in file timers.s
Comment: SYSCTL_RCGCTIMER_R used once
TIMER0 00000001

Symbol: TIMER0
   Definitions
      At line 25 in file timers.s
   Uses
      At line 43 in file timers.s
      At line 49 in file timers.s

TIMER0_A_NVIC_EN_R E000E100

Symbol: TIMER0_A_NVIC_EN_R
   Definitions
      At line 17 in file timers.s
   Uses
      At line 89 in file timers.s
Comment: TIMER0_A_NVIC_EN_R used once
TIMER0_A_NVIC_INT_NUM 00000013

Symbol: TIMER0_A_NVIC_INT_NUM
   Definitions
      At line 15 in file timers.s
   Uses
      At line 88 in file timers.s
Comment: TIMER0_A_NVIC_INT_NUM used once
TIMER0_A_NVIC_PRIO_R E000E410

Symbol: TIMER0_A_NVIC_PRIO_R
   Definitions
      At line 16 in file timers.s
   Uses
      At line 84 in file timers.s
Comment: TIMER0_A_NVIC_PRIO_R used once
TIMER0_CFG_R 40030000

Symbol: TIMER0_CFG_R
   Definitions
      At line 18 in file timers.s
   Uses
      At line 58 in file timers.s
Comment: TIMER0_CFG_R used once
TIMER0_CTL_R 4003000C




ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

Symbol: TIMER0_CTL_R
   Definitions
      At line 20 in file timers.s
   Uses
      At line 54 in file timers.s
      At line 92 in file timers.s

TIMER0_ICR_R 40030024

Symbol: TIMER0_ICR_R
   Definitions
      At line 22 in file timers.s
   Uses
      At line 74 in file timers.s
      At line 100 in file timers.s

TIMER0_IMR_R 40030018

Symbol: TIMER0_IMR_R
   Definitions
      At line 21 in file timers.s
   Uses
      At line 78 in file timers.s
Comment: TIMER0_IMR_R used once
TIMER0_TAILR_R 40030028

Symbol: TIMER0_TAILR_R
   Definitions
      At line 23 in file timers.s
   Uses
      At line 66 in file timers.s
Comment: TIMER0_TAILR_R used once
TIMER0_TAMR_R 40030004

Symbol: TIMER0_TAMR_R
   Definitions
      At line 19 in file timers.s
   Uses
      At line 62 in file timers.s
Comment: TIMER0_TAMR_R used once
TIMER0_TAPR_R 40030038

Symbol: TIMER0_TAPR_R
   Definitions
      At line 24 in file timers.s
   Uses
      At line 70 in file timers.s
Comment: TIMER0_TAPR_R used once
Timer0A_Addr 60010000

Symbol: Timer0A_Addr
   Definitions
      At line 28 in file timers.s
   Uses
      None
Comment: Timer0A_Addr unused
14 symbols
354 symbols in table
