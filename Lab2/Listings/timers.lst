


ARM Macro Assembler    Page 1 


    1 00000000         ; timers.s
    2 00000000         ; Desenvolvido para a placa EK-TM4C1294XL
    3 00000000         ; Jhony Minetto Araujo, Ricardo Marthus Gremmelmaier, Ro
                       drigo Wolsky Poli
    4 00000000         ; Ver 1 02/12/2024
    5 00000000         
    6 00000000         ; ------------------------------------------------------
                       -------------------------
    7 00000000                 THUMB                        ; Instrucoes do tip
                                                            o Thumb-2
    8 00000000         ; ------------------------------------------------------
                       -------------------------
    9 00000000         ; Definicoes dos Registradores Gerais
   10 00000000 400FE604 
                       SYSCTL_RCGCTIMER_R
                               EQU              0x400FE604
   11 00000000 400FEA04 
                       SYSCTL_PRTIMER_R
                               EQU              0x400FEA04
   12 00000000         ; ========================
   13 00000000         ; Definicoes dos Timers
   14 00000000         ; ~~~~~~~~~~~~~~~~ Timer 0 ~~~~~~~~~~~~~~~~~~
   15 00000000 00000013 
                       TIMER0_A_NVIC_INT_NUM
                               EQU              19
   16 00000000 E000E410 
                       TIMER0_A_NVIC_PRIO_R
                               EQU              0xE000E410
   17 00000000 E000E100 
                       TIMER0_A_NVIC_EN_R
                               EQU              0xE000E100
   18 00000000 40030000 
                       TIMER0_CFG_R
                               EQU              0x40030000
   19 00000000 40030004 
                       TIMER0_TAMR_R
                               EQU              0x40030004
   20 00000000 4003000C 
                       TIMER0_CTL_R
                               EQU              0x4003000C
   21 00000000 40030018 
                       TIMER0_IMR_R
                               EQU              0x40030018
   22 00000000 40030024 
                       TIMER0_ICR_R
                               EQU              0x40030024
   23 00000000 40030028 
                       TIMER0_TAILR_R
                               EQU              0x40030028
   24 00000000 40030038 
                       TIMER0_TAPR_R
                               EQU              0x40030038
   25 00000000 00000001 
                       TIMER0  EQU              2_00000001
   26 00000000         
   27 00000000         ; ~~~~~~~~~~~~~ OTHER CONSTANTS ~~~~~~~~~~~~~~
   28 00000000 20010000 
                       Timer0A_Addr
                               EQU              0x20010000



ARM Macro Assembler    Page 2 


   29 00000000         
   30 00000000 400583FC 
                       GPIO_PORTA_AHB_DATA_R
                               EQU              0x400583FC
   31 00000000 400653FC 
                       GPIO_PORTP_DATA_R
                               EQU              0x400653FC
   32 00000000 400663FC 
                       GPIO_PORTQ_DATA_R
                               EQU              0x400663FC
   33 00000000         
   34 00000000         
   35 00000000         ; ------------------------------------------------------
                       -------------------------
   36 00000000         ; Area de Codigo - Tudo abaixo da diretiva a seguir sera
                        armazenado na memoria de 
   37 00000000         ;                  codigo
   38 00000000                 AREA             |.text|, CODE, READONLY, ALIGN=
2
   39 00000000         
   40 00000000         ; Se alguma funcao do arquivo for chamada em outro arqui
                       vo 
   41 00000000                 EXPORT           Timer0A_Init
   42 00000000                 EXPORT           Timer0A_Handler
   43 00000000         
   44 00000000         
   45 00000000         ;-------------------------------------------------------
                       -------------------------
   46 00000000         Timer0A_Init
   47 00000000 4828            LDR              R0, =SYSCTL_RCGCTIMER_R ; Seta 
                                                            o timer 0 para ser 
                                                            usado
   48 00000002 F04F 0101       LDR              R1, =TIMER0
   49 00000006 6001            STR              R1, [R0]
   50 00000008         
   51 00000008 4827            LDR              R0, =Timer0A_Addr
   52 0000000A F04F 0100       MOV              R1, #0
   53 0000000E 6001            STR              R1, [R0]
   54 00000010         
   55 00000010 4826            LDR              R0, =SYSCTL_PRTIMER_R
   56 00000012         EsperaTIMER
   57 00000012 6801            LDR              R1, [R0]
   58 00000014 F04F 0201       LDR              R2, =TIMER0
   59 00000018 4211            TST              R1, R2
   60 0000001A D0FA            BEQ              EsperaTIMER
   61 0000001C         
   62 0000001C         
   63 0000001C 4824            LDR              R0, =TIMER0_CTL_R ; Desabilita 
                                                            o timer 0
   64 0000001E F04F 0100       MOV              R1, #0
   65 00000022 6001            STR              R1, [R0]
   66 00000024         
   67 00000024 4823            LDR              R0, =TIMER0_CFG_R ; Configura o
                                                             modo de 32 bits
   68 00000026 F04F 0100       MOV              R1, #0x0
   69 0000002A 6001            STR              R1, [R0]
   70 0000002C         
   71 0000002C 4822            LDR              R0, =TIMER0_TAMR_R ; Define o m
                                                            odo one-shot=0x01 o



ARM Macro Assembler    Page 3 


                                                            u peri√≥dico=0x02
   72 0000002E F04F 0102       MOV              R1, #0x2
   73 00000032 6001            STR              R1, [R0]
   74 00000034         
   75 00000034 4821            LDR              R0, =TIMER0_TAILR_R ; Tempo cal
                                                            culado para 20ms
   76 00000036 4922            LDR              R1, =1600000
   77 00000038 6001            STR              R1, [R0]
   78 0000003A         
   79 0000003A 4822            LDR              R0, =TIMER0_TAPR_R ; Configura 
                                                            o Prescaler 
   80 0000003C F04F 0100       MOV              R1, #0      ; 0 para desabilita
                                                            do
   81 00000040 6001            STR              R1, [R0]
   82 00000042         
   83 00000042 4821            LDR              R0, =TIMER0_ICR_R ; Garante que
                                                             a primeira interru
                                                            pcao sera atendida 
                                                            (?)
   84 00000044 F04F 0101       MOV              R1, #1
   85 00000048 6001            STR              R1, [R0]
   86 0000004A         
   87 0000004A 4820            LDR              R0, =TIMER0_IMR_R ; Utiliza a i
                                                            nterrupcao para est
                                                            ouro do timer
   88 0000004C F04F 0101       MOV              R1, #1
   89 00000050 6001            STR              R1, [R0]
   90 00000052         
   91 00000052 F04F 0004       MOV              R0, #4      ; Configura a prior
                                                            idade da interrupca
                                                            o do timer
   92 00000056 EA4F 7040       LSL              R0, R0, #29
   93 0000005A 491D            LDR              R1, =TIMER0_A_NVIC_PRIO_R
   94 0000005C 6008            STR              R0, [R1]
   95 0000005E         
   96 0000005E F04F 0001       MOV              R0, #1      ; Habilita a interr
                                                            upcao do Timer 0A n
                                                            o NVIC Enable Regis
                                                            ter
   97 00000062 EA4F 40C0       LSL              R0, R0, #TIMER0_A_NVIC_INT_NUM
   98 00000066 491B            LDR              R1, =TIMER0_A_NVIC_EN_R
   99 00000068 6008            STR              R0, [R1]
  100 0000006A         
  101 0000006A 4811            LDR              R0, =TIMER0_CTL_R ; Habilita o 
                                                            timer 0
  102 0000006C F04F 0101       MOV              R1, #1
  103 00000070 6001            STR              R1, [R0]
  104 00000072         
  105 00000072 4770            BX               LR
  106 00000074         
  107 00000074         
  108 00000074         Timer0A_Handler
  109 00000074 4814            LDR              R0, =TIMER0_ICR_R ; Limpa o bit
                                                             da interrupcao
  110 00000076 F04F 0101       MOV              R1, #1
  111 0000007A 6001            STR              R1, [R0]
  112 0000007C         
  113 0000007C 480A            LDR              R0, =Timer0A_Addr
  114 0000007E F04F 0101       MOV              R1, #1



ARM Macro Assembler    Page 4 


  115 00000082 6001            STR              R1, [R0]
  116 00000084         
  117 00000084 4914            LDR              R1, =GPIO_PORTA_AHB_DATA_R ; Te
                                                            ste para setar leds
                                                            
  118 00000086 F04F 00F0       MOV              R0, #2_11110000
  119 0000008A 6008            STR              R0, [R1]
  120 0000008C         
  121 0000008C 4913            LDR              R1, =GPIO_PORTQ_DATA_R
  122 0000008E F04F 000F       MOV              R0, #2_00001111
  123 00000092 6008            STR              R0, [R1]
  124 00000094         
  125 00000094 4912            LDR              R1, =GPIO_PORTP_DATA_R
  126 00000096 680A            LDR              R2, [R1]
  127 00000098 2A00            CMP              R2, #2_00000000
  128 0000009A BF0C            ITE              EQ
  129 0000009C 2020            MOVEQ            R0, #2_00100000
  130 0000009E 2000            MOVNE            R0, #2_00000000
  131 000000A0 6008            STR              R0, [R1]
  132 000000A2         
  133 000000A2         
  134 000000A2 4770            BX               LR
  135 000000A4         
  136 000000A4                 ALIGN                        ;Garante que o fim 
                                                            da secao esta alinh
                                                            ada 
  137 000000A4                 END                          ;Fim do arquivo
              400FE604 
              20010000 
              400FEA04 
              4003000C 
              40030000 
              40030004 
              40030028 
              00186A00 
              40030038 
              40030024 
              40030018 
              E000E410 
              E000E100 
              400583FC 
              400663FC 
              400653FC 
Command Line: --debug --xref --diag_suppress=9931,A1950W --cpu=Cortex-M4.fp.sp 
--depend=.\objects\timers.d -o.\objects\timers.o -IC:\Users\jhony\AppData\Local
\Arm\Packs\Keil\TM4C_DFP\1.1.0\Device\Include\TM4C129 --predefine="__EVAL SETA 
1" --predefine="__UVISION_VERSION SETA 541" --predefine="TM4C1294NCPDT SETA 1" 
--list=.\listings\timers.lst timers.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.text 00000000

Symbol: .text
   Definitions
      At line 38 in file timers.s
   Uses
      None
Comment: .text unused
EsperaTIMER 00000012

Symbol: EsperaTIMER
   Definitions
      At line 56 in file timers.s
   Uses
      At line 60 in file timers.s
Comment: EsperaTIMER used once
Timer0A_Handler 00000074

Symbol: Timer0A_Handler
   Definitions
      At line 108 in file timers.s
   Uses
      At line 42 in file timers.s
Comment: Timer0A_Handler used once
Timer0A_Init 00000000

Symbol: Timer0A_Init
   Definitions
      At line 46 in file timers.s
   Uses
      At line 41 in file timers.s
Comment: Timer0A_Init used once
4 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

GPIO_PORTA_AHB_DATA_R 400583FC

Symbol: GPIO_PORTA_AHB_DATA_R
   Definitions
      At line 30 in file timers.s
   Uses
      At line 117 in file timers.s
Comment: GPIO_PORTA_AHB_DATA_R used once
GPIO_PORTP_DATA_R 400653FC

Symbol: GPIO_PORTP_DATA_R
   Definitions
      At line 31 in file timers.s
   Uses
      At line 125 in file timers.s
Comment: GPIO_PORTP_DATA_R used once
GPIO_PORTQ_DATA_R 400663FC

Symbol: GPIO_PORTQ_DATA_R
   Definitions
      At line 32 in file timers.s
   Uses
      At line 121 in file timers.s
Comment: GPIO_PORTQ_DATA_R used once
SYSCTL_PRTIMER_R 400FEA04

Symbol: SYSCTL_PRTIMER_R
   Definitions
      At line 11 in file timers.s
   Uses
      At line 55 in file timers.s
Comment: SYSCTL_PRTIMER_R used once
SYSCTL_RCGCTIMER_R 400FE604

Symbol: SYSCTL_RCGCTIMER_R
   Definitions
      At line 10 in file timers.s
   Uses
      At line 47 in file timers.s
Comment: SYSCTL_RCGCTIMER_R used once
TIMER0 00000001

Symbol: TIMER0
   Definitions
      At line 25 in file timers.s
   Uses
      At line 48 in file timers.s
      At line 58 in file timers.s

TIMER0_A_NVIC_EN_R E000E100

Symbol: TIMER0_A_NVIC_EN_R
   Definitions
      At line 17 in file timers.s
   Uses
      At line 98 in file timers.s
Comment: TIMER0_A_NVIC_EN_R used once
TIMER0_A_NVIC_INT_NUM 00000013




ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

Symbol: TIMER0_A_NVIC_INT_NUM
   Definitions
      At line 15 in file timers.s
   Uses
      At line 97 in file timers.s
Comment: TIMER0_A_NVIC_INT_NUM used once
TIMER0_A_NVIC_PRIO_R E000E410

Symbol: TIMER0_A_NVIC_PRIO_R
   Definitions
      At line 16 in file timers.s
   Uses
      At line 93 in file timers.s
Comment: TIMER0_A_NVIC_PRIO_R used once
TIMER0_CFG_R 40030000

Symbol: TIMER0_CFG_R
   Definitions
      At line 18 in file timers.s
   Uses
      At line 67 in file timers.s
Comment: TIMER0_CFG_R used once
TIMER0_CTL_R 4003000C

Symbol: TIMER0_CTL_R
   Definitions
      At line 20 in file timers.s
   Uses
      At line 63 in file timers.s
      At line 101 in file timers.s

TIMER0_ICR_R 40030024

Symbol: TIMER0_ICR_R
   Definitions
      At line 22 in file timers.s
   Uses
      At line 83 in file timers.s
      At line 109 in file timers.s

TIMER0_IMR_R 40030018

Symbol: TIMER0_IMR_R
   Definitions
      At line 21 in file timers.s
   Uses
      At line 87 in file timers.s
Comment: TIMER0_IMR_R used once
TIMER0_TAILR_R 40030028

Symbol: TIMER0_TAILR_R
   Definitions
      At line 23 in file timers.s
   Uses
      At line 75 in file timers.s
Comment: TIMER0_TAILR_R used once
TIMER0_TAMR_R 40030004

Symbol: TIMER0_TAMR_R



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Absolute symbols

   Definitions
      At line 19 in file timers.s
   Uses
      At line 71 in file timers.s
Comment: TIMER0_TAMR_R used once
TIMER0_TAPR_R 40030038

Symbol: TIMER0_TAPR_R
   Definitions
      At line 24 in file timers.s
   Uses
      At line 79 in file timers.s
Comment: TIMER0_TAPR_R used once
Timer0A_Addr 20010000

Symbol: Timer0A_Addr
   Definitions
      At line 28 in file timers.s
   Uses
      At line 51 in file timers.s
      At line 113 in file timers.s

17 symbols
357 symbols in table
